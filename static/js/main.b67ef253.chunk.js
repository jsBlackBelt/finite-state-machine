(this.webpackJsonpintuit=this.webpackJsonpintuit||[]).push([[0],{111:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(38),c=n.n(o),i=(n(50),n(17)),u=n(2),s=n(11),l=n(14),h=n(125),m=function(){return{actor:null,setActor:function(t){this.actor=t},get name(){return this.actor?this.actor.name:""}}},f=n(4),d=function(){return{shows:[],show:null,setShows:function(t){this.shows=t},setCurrentShow:function(t){this.show=t},get length(){return this.shows?this.shows.length:0},get showsPlain(){return Object(f.g)(this.shows).map((function(t){return t.show})).filter((function(t){return t.image}))}}},v=r.a.createContext(null),w=function(t){var e=t.children,n={actorStore:Object(l.a)(m),showsStore:Object(l.a)(d)};return r.a.createElement(v.Provider,{value:n},e)};function p(){var t=r.a.useContext(v);if(!t)throw new Error("useStore must be used within a StoreProvider.");return t}var b=function(){return r.a.useContext(x)},E=n(43),S=n(28),g=n.n(S),j=n(39),O=n.n(j);var y=function(t){var e={transition:function(n){var a,r,o=t[this.currentState.value].transitions[n.target];if(!o)throw new Error("".concat(n.target," is not a valid transition from ").concat(this.currentState.value));return(null===n||void 0===n||null===(a=n.action)||void 0===a?void 0:a.beforeTransition)&&n.action.beforeTransition(),e.currentState=Object.assign({},e.getStateTransitions(o),{value:o}),(null===n||void 0===n||null===(r=n.action)||void 0===r?void 0:r.afterTransition)&&n.action.afterTransition(),console.log("current state:",e.currentState.value),e.currentState},getStateTransitions:function(e){var n=this;return Object.keys(t[e].transitions).reduce((function(t,e){return t["to".concat(g()(O()(e)))]=function(t){return n.transition(Object(E.a)({target:e},t))},t}),{})}};if(!t||!t.initialState)throw new Error("stateMachineDefinition is not valid");return e.currentState=Object.assign({},e.getStateTransitions(t.initialState),{value:t.initialState}),e},x=r.a.createContext(null),T=function(t){var e=t.states,n=t.children,a=y(e);return r.a.createElement(x.Provider,{value:a},n)},C=n(8),k=n(9);function I(){var t=Object(C.a)(["\n    display: flex;\n    justify-content: space-evenly;\n    align-items: center;\n"]);return I=function(){return t},t}var D={Header:k.a.div(I())},A=function(){var t=Object(u.f)(),e=Object(a.useState)(""),n=Object(s.a)(e,2),o=n[0],c=n[1],i=function(t,e){var n=Object(a.useState)(t),r=Object(s.a)(n,2),o=r[0],c=r[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){c(t)}),e);return function(){clearTimeout(n)}}),[t,e]),o}(o,500),m=b(),f=p(),d=f.showsStore,v=f.actorStore;return Object(a.useEffect)((function(){fetch("http://api.tvmaze.com/search/shows?q=".concat(i)).then((function(t){return t.json()})).then((function(t){return d.setShows(t)})).then((function(){m.currentState.toHome({action:{afterTransition:function(){return t.push("/")}}})}))}),[i]),Object(l.b)((function(){return r.a.createElement(D.Header,null,r.a.createElement("div",null,"Search show:",r.a.createElement(h.a,{value:o,onChange:function(t){return c(t.target.value)}})),d.show&&r.a.createElement("div",null,"Current Show: ",d.show.name),v.actor&&r.a.createElement("div",null,"Current Actor: ",v.actor.person.name," "))}))};function P(){var t=Object(C.a)(["\n    display: flex;\n    padding: 2rem;\n    flex-wrap: wrap;\n"]);return P=function(){return t},t}var N={List:k.a.div(P())},z=function(){var t=p().showsStore;return Object(l.b)((function(){return r.a.createElement(N.List,null,t.showsPlain.map((function(t){return r.a.createElement(_,{type:q.show,data:t,key:t.id,hideSummary:!0,hideName:!0})})))}))},H=n(16),B=n.n(H);function J(){var t=Object(C.a)(["\n    display: flex;\n    flex-direction: column;\n\n    img: {\n        width: fit-content;\n    }\n"]);return J=function(){return t},t}function L(){var t=Object(C.a)(["\n    display: flex;\n    flex-direction: row;\n    cursor: pointer;\n    margin: 1rem;\n    width: fit-content;\n"]);return L=function(){return t},t}var M=k.a.div(L()),W={Image:k.a.div(J()),Tile:M},_=function(t){var e=t.type,n=t.data,a=t.hideSummary,o=t.hideName,c=Object(u.f)(),i=p(),l=i.showsStore,h=i.actorStore,m=b(),f=e===q.character?[B()(n,"character.image.medium",""),B()(n,"character.name")]:e===q.actor?[B()(n,"person.image.medium",""),B()(n,"person.name")]:[B()(n,"image.medium",""),B()(n,"name")],d=Object(s.a)(f,2),v=d[0],w=d[1];return r.a.createElement(W.Tile,{onClick:function(){return function(){switch(e){case q.show:l.setCurrentShow(n),m.currentState.toShow({action:{afterTransition:function(){return c.push("/show/".concat(n.id))}}});break;case q.character:h.setActor(n),m.currentState.toActor({action:{afterTransition:function(){return c.push("/actor/".concat(n.person.id))}}});break;case q.season:case q.actor:default:return}}()}},r.a.createElement(W.Image,null,r.a.createElement("img",{alt:w,src:v}),!o&&w),!a&&n.summary&&r.a.createElement("div",null,n.summary.replace(/(<([^>]+)>)/gi,"")))},q={show:"ShowTile",actor:"ActorTile",character:"CharacterTile",season:"SeasonTile"};var $=function(){return r.a.createElement("div",null,r.a.createElement(z,null))};function F(){var t=Object(C.a)(["\n    display: flex;\n    padding: 2rem;\n    flex-wrap: wrap;\n"]);return F=function(){return t},t}var G={Credits:k.a.div(F())};var K=function(){var t=Object(a.useState)(null),e=Object(s.a)(t,2),n=e[0],o=e[1],c=Object(u.g)().actorId,i=p().actorStore;return Object(a.useEffect)((function(){fetch("http://api.tvmaze.com/people/".concat(c,"/castcredits?embed=show")).then((function(t){return t.json()})).then((function(t){return t.map((function(t){return t._embedded.show}))})).then((function(t){return o(t)}))}),[c]),Object(l.b)((function(){return r.a.createElement("div",null,i.actor&&r.a.createElement(_,{type:q.actor,data:i.actor}),r.a.createElement(G.Credits,null,n&&n.map((function(t){return r.a.createElement(_,{type:q.show,data:t,hideSummary:!0,hideName:!0,key:t.id})}))))}))};function Q(){var t=Object(C.a)(["\n    display: flex;\n    padding: 2rem;\n    flex-wrap: wrap;\n"]);return Q=function(){return t},t}var R={Characters:k.a.div(Q())};var U=function(){var t=Object(a.useState)(null),e=Object(s.a)(t,2),n=e[0],o=e[1],c=Object(u.g)().showId;return Object(a.useEffect)((function(){fetch("http://api.tvmaze.com/shows/".concat(c,"?embed[]=cast")).then((function(t){return t.json()})).then((function(t){return o(t)}))}),[c]),r.a.createElement("div",null,n&&r.a.createElement("div",null,r.a.createElement(_,{type:q.show,data:n,hideName:!0}),r.a.createElement(R.Characters,null,n._embedded.cast.map((function(t){return r.a.createElement(_,{type:q.character,data:t,key:t.character.id})})))))},V={initialState:"home",home:{transitions:{show:"showDetails",home:"home"}},showDetails:{transitions:{home:"home",actor:"actorDetails"}},actorDetails:{transitions:{home:"home",show:"showDetails"}}};var X=function(){return r.a.createElement("div",null,r.a.createElement(T,{states:V},r.a.createElement(w,null,r.a.createElement(i.a,null,r.a.createElement(A,null),r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement($,null)),r.a.createElement(u.a,{exact:!0,path:"/show/:showId"},r.a.createElement(U,null)),r.a.createElement(u.a,{exact:!0,path:"/actor/:actorId"},r.a.createElement(K,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},45:function(t,e,n){t.exports=n(111)},50:function(t,e,n){}},[[45,1,2]]]);
//# sourceMappingURL=main.b67ef253.chunk.js.map